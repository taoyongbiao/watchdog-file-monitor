# 文件监控系统

这是一个基于Python的文件监控系统，具有以下功能：

## 功能特性

1. **实时文件监控**: 使用watchdog库监控指定目录的文件变化（创建、修改、删除）
2. **定时任务**: 使用schedule库在每天07:00和17:00执行全量扫描
3. **AI集成**: 当检测到文件变化时，调用AI接口生成日报总结
4. **Web服务接口**: 提供HTTP接口用于查询服务状态和手动触发扫描
5. **文件差异比较**: 自动比较文件变更并生成差异报告
6. **版本控制**: 支持使用Git或文件缓存机制管理文件版本

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 以服务模式运行（推荐）

```bash
python file_monitor.py
```

这将启动文件监控服务，并同时启动Web服务接口，默认监听8080端口。

### 手动触发扫描

```bash
python file_monitor.py --manual-scan
```

这将执行一次全量扫描并生成日报，然后退出。

## Web服务接口

服务运行时可通过以下HTTP接口进行交互：

- `GET http://localhost:8080/status` - 查询服务状态
- `GET http://localhost:8080/scan` - 手动触发全量扫描

## 配置说明

在 `file_monitor.py` 中可以修改以下配置：

- `MONITOR_DIR`: 要监控的目录（默认为当前目录）
- `AI_API_URL`: AI接口的URL地址
- `REPORT_SAVE_PATH`: 日报保存路径
- `WEB_PORT`: Web服务监听端口（默认为8080）

## 输出文件

- `file_changes.log`: 记录所有文件变化的日志文件
- `daily_reports/`: 存放AI生成的日报文件的目录